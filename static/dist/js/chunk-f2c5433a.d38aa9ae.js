(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f2c5433a"],{"7cd4":function(t,e,n){},"93f9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout flex flex-column overflow-hidden"},[n("header",{staticClass:"flex-between flex-vcenter plr-20"},[n("router-link",{staticClass:"fs-18 font-bold",attrs:{to:"/"}},[t._v(t._s(t.title)+" "+t._s(t.version))]),n("div",{staticClass:"header-right"},[n("el-select",{staticClass:"mr-10 width-100",attrs:{size:"mini"},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}},[n("el-option",{attrs:{value:"en",label:"English"}}),n("el-option",{attrs:{value:"zh",label:"中文"}})],1),n("el-dropdown",{staticClass:"pointer"},[n("div",[n("i",{staticClass:"fa fa-user-o fs-20"}),n("span",{staticClass:"fs-16 ml-5 user",domProps:{textContent:t._s(t.user)}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){return t.logout(e)}}},[t._v(t._s(t.$t("common.Logout")))])],1)],1),n("router-link",{staticClass:"fa fa-cog fs-20 pointer ml-10",attrs:{to:"/setting"}})],1)],1),n("main",{staticClass:"plr-20 pt-10 flex-1",staticStyle:{overflow:"auto"}},[n("router-view")],1),n("transition",{attrs:{name:"el-fade-in-linear",appear:""}},[t.$route.params.id?n("footer",{staticClass:"flex-center width-full"},[n("div",{staticClass:"flex-center list-content width-1000"},t._l(t.menus,(function(e){return n("a",{key:e.name,staticClass:"flex flex-1 flex-center height-full pointer",class:{"router-active":t.currentMenu===e.path,"list-item":"Settings"!==e.name||"deploy"===t.mode},attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.handleMenuClick(e,n)}}},[n("span",{staticClass:"fs-20"},[t._v(t._s(t.$t("home."+e.name))),n("span",{staticStyle:{display:"none"}},[t._v(t._s(t.currentMenu)+" "+t._s(e.path))])])])})),0)]):t._e()])],1)},r=[],s=n("a34a"),o=n.n(s),i=n("8f12"),l=n("c949");function u(t,e,n,a,r,s,o){try{var i=t[s](o),l=i.value}catch(u){return void n(u)}i.done?e(l):Promise.resolve(l).then(a,r)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var s=t.apply(e,n);function o(t){u(s,a,r,o,i,"next",t)}function i(t){u(s,a,r,o,i,"throw",t)}o(void 0)}))}}var d={name:"Layout",data:function(){return{menus:i["d"],user:"",version:"",mode:"",currentMenu:""}},mounted:function(){this.user=JSON.parse(localStorage.getItem("user")||"{}").username,this.fetchVersion()},created:function(){this.onChangeCluster()},methods:{onChangeCluster:function(){var t=this;return c(o.a.mark((function e(){var n,a,r,s,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$route.path,t.currentMenu=n.split("/").lastItem,a=t.$route.params.id,a){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,l["a"].getCluster();case 7:r=e.sent,s=r.data.entity,i=s[a].mode,t.mode=i;case 11:case"end":return e.stop()}}),e)})))()},handleMenuClick:function(t){var e=this;return c(o.a.mark((function n(){return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("Settings"!==t.name){n.next=4;break}if("import"!==e.mode){n.next=4;break}return e.$message.warning(e.$t("home.The imported cluster does not support editing")),n.abrupt("return");case 4:e.$route.name!=t.name&&(e.$router.push({path:t.path}),e.currentMenu=t.path.split("/").lastItem);case 5:case"end":return n.stop()}}),n)})))()},logout:function(){localStorage.removeItem("user"),this.$message.success("成功登出"),this.$router.push("/login")},fetchVersion:function(){var t=this;return c(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["d"].getVersion();case 2:n=e.sent,a=n.data.entity,t.version=a;case 5:case"end":return e.stop()}}),e)})))()}},watch:{$route:{handler:function(t,e){this.menus="loader"===t.meta?i["c"]:i["d"],this.onChangeCluster()},immediate:!0},"$i18n.locale":function(t){localStorage.setItem("locale",t),document.title=this.title,document.documentElement.lang=t}},computed:{title:function(){return this.$t("layout.ClickHouse Management Console")}}},f=d,m=(n("cd2f"),n("2877")),p=Object(m["a"])(f,a,r,!1,null,"789bed43",null);e["default"]=p.exports},cd2f:function(t,e,n){"use strict";n("7cd4")}}]);