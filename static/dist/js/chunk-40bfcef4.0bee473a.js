(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40bfcef4"],{"1f78":function(e,t,a){},3008:function(e,t,a){"use strict";var r=a("1f78"),n=a.n(r);n.a},6812:function(e,t,a){"use strict";var r=a("d959"),n=a.n(r);n.a},"8cbb":function(e,t,a){"use strict";var r=a("9ac7"),n=a("0148");function l(e,t){var a=null==e?0:e.length;return!!a&&Object(n["a"])(e,t,0)>-1}var i=l;function s(e,t,a){var r=-1,n=null==e?0:e.length;while(++r<n)if(a(t,e[r]))return!0;return!1}var o=s,c=a("6568"),u=a("a55c");function f(){}var p=f,h=a("1989"),b=1/0,d=u["a"]&&1/Object(h["a"])(new u["a"]([,-0]))[1]==b?function(e){return new u["a"](e)}:p,v=d,m=200;function y(e,t,a){var n=-1,l=i,s=e.length,u=!0,f=[],p=f;if(a)u=!1,l=o;else if(s>=m){var b=t?null:v(e);if(b)return Object(h["a"])(b);u=!1,l=c["a"],p=new r["a"]}else p=t?[]:f;e:while(++n<s){var d=e[n],y=t?t(d):d;if(d=a||0!==d?d:0,u&&y===y){var g=p.length;while(g--)if(p[g]===y)continue e;t&&p.push(y),f.push(d)}else l(p,y,a)||(p!==f&&p.push(y),f.push(d))}return f}t["a"]=y},"8d70":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"settings"},[a("breadcrumb",{attrs:{data:["Clusters",e.$route.params.id,"tables"]}}),a("section",{staticClass:"mb-20"},[a("table-metric"),a("replication-table"),a("zk-table")],1)],1)},n=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"zkTable"},[a("div",{staticClass:"title flex flex-between flex-vcenter ptb-10"},[a("span",{staticClass:"fs-20 font-bold"},[e._v(e._s(e.$t("tables.Zookeeper Status")))])]),a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},e._l(e.cols,(function(t,r){return a("el-table-column",{key:r,attrs:{label:t,align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.column;return[a("span",[e._v(e._s(r.label))])]}},{key:"default",fn:function(t){var n=t.row,l=t.column;return[a("span",0===r?[e._v(e._s(Object.keys(n)[0]))]:[e._v(e._s(Object.values(n)[0][l.label]))])]}}],null,!0)})})),1)],1)},i=[],s=a("a34a"),o=a.n(s),c=a("f976");function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}var f=u,p=Math.max;function h(e,t,a){return t=p(void 0===t?e.length-1:t,0),function(){var r=arguments,n=-1,l=p(r.length-t,0),i=Array(l);while(++n<l)i[n]=r[t+n];n=-1;var s=Array(t+1);while(++n<t)s[n]=r[n];return s[t]=a(i),f(e,this,s)}}var b=h;function d(e){return function(){return e}}var v=d,m=a("0305"),y=m["a"]?function(e,t){return Object(m["a"])(e,"toString",{configurable:!0,enumerable:!1,value:v(t),writable:!0})}:c["a"],g=y,w=800,_=16,C=Date.now;function x(e){var t=0,a=0;return function(){var r=C(),n=_-(r-a);if(a=r,n>0){if(++t>=w)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var S=x,$=S(g),D=$;function k(e,t){return D(b(e,t,c["a"]),e+"")}var j=k,z=a("b703"),O=a("0148");function P(e,t,a,r){var n=a-1,l=e.length;while(++n<l)if(r(e[n],t))return n;return-1}var T=P,A=a("a2fb"),E=a("7804"),q=Array.prototype,N=q.splice;function F(e,t,a,r){var n=r?T:O["a"],l=-1,i=t.length,s=e;e===t&&(t=Object(E["a"])(t)),a&&(s=Object(z["a"])(e,Object(A["a"])(a)));while(++l<i){var o=0,c=t[l],u=a?a(c):c;while((o=n(s,u,o,r))>-1)s!==e&&N.call(s,o,1),N.call(e,o,1)}return e}var K=F;function I(e,t){return e&&e.length&&t&&t.length?K(e,t):e}var L=I,R=j(L),M=R,Q=a("8cbb");function U(e){return e&&e.length?Object(Q["a"])(e):[]}var B=U,J=a("c949");function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Z(e,t,a,r,n,l,i){try{var s=e[l](i),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(r,n)}function G(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function i(e){Z(l,r,n,i,s,"next",e)}function s(e){Z(l,r,n,i,s,"throw",e)}i(void 0)}))}}var H={data:function(){return{cols:[""],keys:[""],tableData:[],timeFilter:null,refresh:null}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return G(o.a.mark((function t(){var a,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J["g"].zkStatus(e.$route.params.id);case 2:a=t.sent,r=a.data.entity,e.cols=[""],e.keys=[""],e.tableData=[],r.forEach((function(t){e.cols.push(t.host),e.keys=M(Object.keys(t),"host")})),e.keys.forEach((function(t){var a=W({},t,{});r.forEach((function(r){a[t][r["host"]]=r[t],e.tableData.push(a)})),e.tableData=B(e.tableData)}));case 9:case"end":return t.stop()}}),t)})))()},timeFilterChange:function(){this.fetchData()},timeFilterRefresh:function(){this.fetchData()}}},V=H,X=a("2877"),Y=Object(X["a"])(V,l,i,!1,null,"3885750b",null),ee=Y.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"replication-status pb-20"},[a("div",{staticClass:"title flex flex-between flex-vcenter ptb-10"},[a("span",{staticClass:"fs-20 font-bold"},[e._v(e._s(e.$t("tables.Table Replication Status")))]),a("el-input",{staticClass:"width-250",attrs:{size:"medium",placeholder:e.$t("common.keyword search")},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:e.queryList.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:""}},e._l(e.cols,(function(t,r){return a("el-table-column",{key:r,ref:"tableColumn",refInFor:!0,attrs:{label:t.label,prop:t.prop||null,width:"auto",sortable:!!t.prop,align:"center"}},e._l(t.children,(function(t,r){return a("el-table-column",{key:r,attrs:{label:t.label,prop:t.prop,width:"auto",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,n=t.column;return[a("div",{class:e.getClassName(r,n.property)},[e._v(e._s(r[n.property]))])]}}],null,!0)})})),1)})),1),a("div",{staticClass:"text-center"},[e.queryList.length>0?a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"sizes, prev, pager, next, jumper",total:e.queryList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],1)},ae=[],re=a("5c8a");function ne(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Object(Q["a"])(e,void 0,t):[]}var le=ne,ie=a("32e8");function se(e,t){return pe(e)||fe(e,t)||ce(e,t)||oe()}function oe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ce(e,t){if(e){if("string"===typeof e)return ue(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function fe(e,t){var a=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=a){var r,n,l=[],i=!0,s=!1;try{for(a=a.call(e);!(i=(r=a.next()).done);i=!0)if(l.push(r.value),t&&l.length===t)break}catch(o){s=!0,n=o}finally{try{i||null==a["return"]||a["return"]()}finally{if(s)throw n}}return l}}function pe(e){if(Array.isArray(e))return e}function he(e,t,a,r,n,l,i){try{var s=e[l](i),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(r,n)}function be(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function i(e){he(l,r,n,i,s,"next",e)}function s(e){he(l,r,n,i,s,"throw",e)}i(void 0)}))}}var de={data:function(){return{tableData:[],headerData:[],timeFilter:null,refresh:null,currentPage:1,pageSize:10,loading:!1,searchKey:""}},computed:{queryList:function(){var e=this.searchKey,t=this.tableData;return this.currentPage=1,t.filter((function(t){return t.name.includes(e)||t.shard1_0.includes(e)||t.shard1_1.includes(e)||t.shard2_0.includes(e)||t.shard2_1.includes(e)}))},cols:function(){var e=[{prop:"name",label:this.$t("tables.Table Name"),children:[]}],t=this.headerData;return t.forEach((function(t,a){var r="shard".concat(a+1),n={label:r,children:t.map((function(e,t){return{prop:"".concat(r,"_").concat(t),label:e}}))};e.push(n)})),e}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return be(o.a.mark((function t(){var a,r,n,l,i,s,c;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,J["g"].replicationStatus(e.$route.params.id)["finally"]((function(){return e.loading=!1}));case 3:a=t.sent,r=a.data.entity,n=r.header,l=void 0===n?[]:n,i=r.tables,s=void 0===i?[]:i,e.headerData=Object(re["a"])(l),c=[],s.forEach((function(e){var t=e.name,a=e.values,r={name:t};a.forEach((function(e,t){var a="shard".concat(t+1);e.forEach((function(e,t){r["".concat(a,"_").concat(t)]=e}))})),c.push(r)})),e.tableData=le(c,ie["a"]);case 13:case"end":return t.stop()}}),t)})))()},timeFilterChange:function(){this.fetchData()},timeFilterRefresh:function(){this.fetchData()},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},getClassName:function(e,t){var a=t.split("_"),r=se(a,2),n=r[0],l=r[1],i=e[t],s="0"===l?"1":"0",o=e[n+"_"+s];if(o&&"-1"!==n.indexOf("F")){var c=parseInt(i.replace("F",""),10);if(o){var u=parseInt(o.replace("L",""),10);return c<u?"yellow":void 0}}}}},ve=de,me=(a("3008"),Object(X["a"])(ve,te,ae,!1,null,"1afb6fd9",null)),ye=me.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-metric pb-20"},[a("div",{staticClass:"title flex flex-between flex-vcenter ptb-10"},[a("span",{staticClass:"fs-20 font-bold"},[e._v(e._s(e.$t("tables.Table Metrics")))]),a("el-input",{staticClass:"width-250",attrs:{size:"medium",placeholder:e.$t("common.keyword search")},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),a("el-table",{attrs:{data:e.currentPageData,center:"",border:""}},[e._l(e.columns,(function(t){var r=t.prop,n=t.label;return[a("el-table-column",{key:r,attrs:{prop:r,label:n,sortable:e.filters[r].sortable,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v(e._s(n))])]}},{key:"default",fn:function(t){var r=t.row,n=t.column;return[n.property.endsWith("compressed")?a("span",[e._v(e._s(e.byteConvert(r[n.property])))]):a("span",[e._v(e._s(r[n.property]))])]}}],null,!0)})]})),a("el-table-column",{attrs:{fixed:"right",label:e.$t("tables.Action"),width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.viewSql(t.row.tableName)}}},[e._v(e._s(e.$t("tables.Schema")))]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.onDelete(t.row.tableName)}}},[e._v(e._s(e.$t("tables.Delete")))])]}}])})],2),a("div",{staticClass:"text-center"},[e.listData.length>0?a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"sizes, prev, pager, next, jumper",total:e.listData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],1)},we=[],_e=a("08ba"),Ce=a("3617"),xe=a("c281");function Se(e,t,a,r,n,l,i){try{var s=e[l](i),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(r,n)}function $e(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function i(e){Se(l,r,n,i,s,"next",e)}function s(e){Se(l,r,n,i,s,"throw",e)}i(void 0)}))}}function De(e,t){return Pe(e)||Oe(e,t)||je(e,t)||ke()}function ke(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function je(e,t){if(e){if("string"===typeof e)return ze(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ze(e,t):void 0}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Oe(e,t){var a=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=a){var r,n,l=[],i=!0,s=!1;try{for(a=a.call(e);!(i=(r=a.next()).done);i=!0)if(l.push(r.value),t&&l.length===t)break}catch(o){s=!0,n=o}finally{try{i||null==a["return"]||a["return"]()}finally{if(s)throw n}}return l}}function Pe(e){if(Array.isArray(e))return e}var Te={data:function(){return{tableData:[],currentPage:1,pageSize:10,searchKey:"",filters:{tableName:{type:"string",value:[],search:!0,sortable:!0},columns:{type:"number",value:[],sortable:!0},rows:{type:"number",value:[],sortable:!0},partitions:{type:"number",value:[],sortable:!0},parts:{type:"number",value:[],sortable:!0},uncompressed:{type:"number",value:[],sortable:!0},compressed:{type:"number",value:[],sortable:!0},readwrite_status:{type:"number",value:[],sortable:!1},completedQueries:{type:"number",value:[],sortable:!0},failedQueries:{type:"number",value:[],sortable:!0},queryCost:{type:"number",value:[],sortable:!1}}}},computed:{columns:function(){var e=[{prop:"tableName",label:this.$t("tables.Table Name")},{prop:"columns",label:this.$t("tables.Columns")},{prop:"rows",label:this.$t("tables.Rows")},{prop:"partitions",label:this.$t("tables.Partitions")},{prop:"parts",label:this.$t("tables.Parts")},{prop:"uncompressed",label:this.$t("tables.UnCompressed")},{prop:"compressed",label:this.$t("tables.Compressed")},{prop:"readwrite_status",label:this.$t("tables.RWStatus"),filters:[{text:"TRUE",value:"TRUE"},{text:"FALSE",value:"FALSE"}]},{prop:"completedQueries",label:this.$t("tables.Completed Queries in last 24h")},{prop:"failedQueries",label:this.$t("tables.Failed Queries in last 24h")},{prop:"queryCost",label:this.$t("tables.Last 7 days info")}];return e},listData:function(){var e=this.searchKey,t=this.filters;return this.currentPage=1,this.tableData.filter((function(a){var r,n=!0;return null!==(r=a.tableName)&&void 0!==r&&r.includes(e)||(n=!1),Object.entries(t).forEach((function(e){var t=De(e,2),r=t[0],l=t[1];l.filter&&l.value.length>0&&!l.value.includes(a[r])&&(n=!1)})),n}))},currentPageData:function(){var e,t=this.currentPage,a=this.pageSize;return null===(e=this.listData)||void 0===e?void 0:e.slice((t-1)*a,t*a)}},mounted:function(){this.fetchData()},methods:{byteConvert:xe["a"],fetchData:function(){var e=this;return $e(o.a.mark((function t(){var a,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J["g"].tableMetrics(e.$route.params.id);case 2:a=t.sent,r=a.data.entity,e.tableData=Object.entries(r).map((function(e){var t=De(e,2),a=t[0],r=t[1];return r.readwrite_status=r.readwrite_status.toString().toUpperCase(),r.queryCost=Object.values(r.queryCost).join(","),r.tableName=a,r}));case 5:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},onDelete:function(e){var t=this;return $e(o.a.mark((function a(){var r,n,l,i,s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm(t.$t("common.Confirm Delete"),t.$t("common.tips"),{confirmButtonText:t.$t("common.Delete"),cancelButtonText:t.$t("common.Cancel"),text:"warning"});case 2:return r=e.split("."),n=De(r,2),l=n[0],i=n[1],s=t.$route.params.id,a.next=6,J["g"].deleteTable(s,{database:l,tableName:i});case 6:t.$message.success("Table ".concat(e," ").concat(t.$t("common.Delete")).concat(t.$t("common.Success"))),t.fetchData();case 8:case"end":return a.stop()}}),a)})))()},viewSql:function(e){var t=this;return $e(o.a.mark((function a(){var r,n,l,i,s,c,u;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.split("."),n=De(r,2),l=n[0],i=n[1],s=t.$route.params.id,a.next=4,J["g"].viewTableCreateSql(s,{database:l,tableName:i});case 4:return c=a.sent,u=c.data.entity.create_table_query,a.next=8,Object(_e["d"])({component:Ce["b"],props:{title:t.$t("tables.Schema"),width:800,customClass:"sql-code-mirror-modal",cancelText:t.$t("common.Cancel"),okText:t.$t("common.Confirm")},data:{sql:u}});case 8:case"end":return a.stop()}}),a)})))()}}},Ae=Te,Ee=(a("6812"),Object(X["a"])(Ae,ge,we,!1,null,null,null)),qe=Ee.exports,Ne={data:function(){return{}},mounted:function(){},methods:{},components:{ZkTable:ee,ReplicationTable:ye,TableMetric:qe}},Fe=Ne,Ke=Object(X["a"])(Fe,r,n,!1,null,"6ab6d610",null);t["default"]=Ke.exports},d959:function(e,t,a){}}]);