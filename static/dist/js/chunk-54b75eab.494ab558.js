(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54b75eab"],{"0af6":function(t,e,n){},"670c":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"home-package"},[n("breadcrumb",{attrs:{data:["package"]}}),n("section",{staticClass:"rpms"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.$t("homePackage.ClickHouse RPMs")))]),n("rpm-list")],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"rpms text-right"},[n("el-button",{staticClass:"mb-15",attrs:{type:"primary"},on:{click:t.chooseFile}},[t._v(t._s(t.$t("homePackage.Upload RPMs")))]),n("el-table",{attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{prop:"version","show-overflow-tooltip":"",label:t.$t("common.Version"),align:"center"}}),n("el-table-column",{attrs:{prop:"files","show-overflow-tooltip":"",label:t.$t("common.Files"),align:"left","min-width":"500"}}),n("el-table-column",{attrs:{label:t.$t("common.Action"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[[n("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"fa fa-trash pointer fs-18",on:{click:function(e){return t.remove(a)}}})]]}}])})],1)],1)},c=[],i=n("a34a"),s=n.n(i),l=n("c949"),u=n("08ba"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("el-upload",{staticClass:"width-full",attrs:{action:"void",multiple:"","auto-upload":!1,"file-list":t.fileList,"on-change":t.changeFile,"on-remove":t.removeFile,accept:".rpm"}},[n("el-button",{staticClass:"mb-15",attrs:{type:"primary"}},[t._v(t._s(t.$t("homeSetting.Upload RPMs")))])],1),t.uploadPercent>0?n("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:t.uploadPercent}}):t._e()],1)},m=[];function f(t,e,n,a,r,o,c){try{var i=t[o](c),s=i.value}catch(l){return void n(l)}i.done?e(s):Promise.resolve(s).then(a,r)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(t){f(o,a,r,c,i,"next",t)}function i(t){f(o,a,r,c,i,"throw",t)}c(void 0)}))}}var d={data:function(){return{fileList:[],uploadPercent:0}},mounted:function(){},methods:{changeFile:function(){this.fileList=arguments.length<=1?void 0:arguments[1]},removeFile:function(){this.fileList=arguments.length<=1?void 0:arguments[1]},onOk:function(){var t=this;return h(s.a.mark((function e(){var n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.fileList.length){e.next=7;break}return n=t.fileList.map((function(e){var n=new FormData;return n.append("package",e.raw),l["d"].upload(n,{onUploadProgress:function(e){var n=0|Math.floor(e.loaded/e.total*100);t.uploadPercent=n}})})),e.next=4,Promise.all(n);case 4:t.$message.success("rpm包上传成功"),e.next=9;break;case 7:return t.$message.warning("请选取文件"),e.abrupt("return",Promise.reject());case 9:case"end":return e.stop()}}),e)})))()}}},v=d,w=n("2877"),b=Object(w["a"])(v,p,m,!1,null,null,null),g=b.exports;function k(t,e,n,a,r,o,c){try{var i=t[o](c),s=i.value}catch(l){return void n(l)}i.done?e(s):Promise.resolve(s).then(a,r)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(t){k(o,a,r,c,i,"next",t)}function i(t){k(o,a,r,c,i,"throw",t)}c(void 0)}))}}var $={data:function(){return{list:[]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return x(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.list=[],e.next=3,l["d"].getList();case 3:n=e.sent,a=n.data.entity,a.forEach((function(e){t.list.push({version:e,files:"clickhouse-client-".concat(e,"-2.noarch.rpm,clickhouse-common-static-").concat(e,"-2.x86_64.rpm,clickhouse-server-").concat(e,"-2.noarch.rpm")})}));case 6:case"end":return e.stop()}}),e)})))()},chooseFile:function(){var t=this;return x(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["c"])({props:{title:t.$t("common.Upload File"),width:"650px",cancelText:t.$t("common.Cancel"),okText:t.$t("common.Upload")},component:g});case 2:t.fetchData();case 3:case"end":return e.stop()}}),e)})))()},remove:function(t){var e=this;return x(s.a.mark((function n(){return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm("Confirm whether to delete ?","Tip",{confirmButtonText:e.$t("common.Delete"),cancelButtonText:e.$t("common.Cancel"),text:"warning"});case 2:return n.next=4,l["d"].deletePackage({packageVersion:t.version});case 4:e.$message.success("".concat(t.version,"版本已删除成功")),e.fetchData();case 6:case"end":return n.stop()}}),n)})))()}}},P=$,_=Object(w["a"])(P,o,c,!1,null,null,null),C=_.exports,y={name:"HomeSetting",data:function(){return{formModel:{}}},components:{RpmList:C}},F=y,D=(n("9abe"),Object(w["a"])(F,a,r,!1,null,"b05ae72c",null));e["default"]=D.exports},"9abe":function(t,e,n){"use strict";var a=n("0af6"),r=n.n(a);r.a}}]);