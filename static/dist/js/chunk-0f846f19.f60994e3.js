(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f846f19"],{"3bca":function(t,e,n){},"4f69":function(t,e,n){"use strict";var a=n("3bca"),r=n.n(a);r.a},6812:function(t,e,n){"use strict";var a=n("d959"),r=n.n(a);r.a},"8cbb":function(t,e,n){"use strict";var a=n("9ac7"),r=n("0148");function i(t,e){var n=null==t?0:t.length;return!!n&&Object(r["a"])(t,e,0)>-1}var o=i;function l(t,e,n){var a=-1,r=null==t?0:t.length;while(++a<r)if(n(e,t[a]))return!0;return!1}var s=l,c=n("6568"),u=n("a55c");function f(){}var p=f,h=n("1989"),d=1/0,b=u["a"]&&1/Object(h["a"])(new u["a"]([,-0]))[1]==d?function(t){return new u["a"](t)}:p,v=b,m=200;function g(t,e,n){var r=-1,i=o,l=t.length,u=!0,f=[],p=f;if(n)u=!1,i=s;else if(l>=m){var d=e?null:v(t);if(d)return Object(h["a"])(d);u=!1,i=c["a"],p=new a["a"]}else p=e?[]:f;t:while(++r<l){var b=t[r],g=e?e(b):b;if(b=n||0!==b?b:0,u&&g===g){var y=p.length;while(y--)if(p[y]===g)continue t;e&&p.push(g),f.push(b)}else i(p,g,n)||(p!==f&&p.push(g),f.push(b))}return f}e["a"]=g},"8d70":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"settings"},[n("breadcrumb",{attrs:{data:["Clusters",t.$route.params.id,"tables"]}}),n("section",{staticClass:"mb-20"},[n("table-metric"),n("replication-table"),n("zk-table")],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkTable"},[n("div",{staticClass:"title flex flex-between flex-vcenter ptb-10"},[n("span",{staticClass:"fs-20 font-bold"},[t._v(t._s(t.$t("tables.Zookeeper Status")))])]),n("table",{staticClass:"el-table width-full reverse-table el-table--border el-table--enable-row-hover el-table--enable-row-transition",attrs:{cellspacing:"0"}},[n("tr",[n("th"),t._l(t.columns,(function(e){return n("th",{key:e.field,staticClass:"pl-10 pt-10 pb-10 is-center"},[t._v(t._s(e.label))])}))],2),t._l(t.fields,(function(e){return n("tr",[n("td",{staticClass:"pl-10 is-center"},[t._v(t._s(e))]),t._l(t.columns,(function(a){return[n("td",{staticClass:"pl-10 is-center"},[t._v(t._s(t.data[a.field][e]))])]}))],2)}))],2)])},o=[],l=n("a34a"),s=n.n(l),c=n("f976");function u(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var f=u,p=Math.max;function h(t,e,n){return e=p(void 0===e?t.length-1:e,0),function(){var a=arguments,r=-1,i=p(a.length-e,0),o=Array(i);while(++r<i)o[r]=a[e+r];r=-1;var l=Array(e+1);while(++r<e)l[r]=a[r];return l[e]=n(o),f(t,this,l)}}var d=h;function b(t){return function(){return t}}var v=b,m=n("0305"),g=m["a"]?function(t,e){return Object(m["a"])(t,"toString",{configurable:!0,enumerable:!1,value:v(e),writable:!0})}:c["a"],y=g,w=800,x=16,S=Date.now;function C(t){var e=0,n=0;return function(){var a=S(),r=x-(a-n);if(n=a,r>0){if(++e>=w)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var _=C,$=_(y),z=$;function D(t,e){return z(d(t,e,c["a"]),t+"")}var P=D,k=n("b703"),O=n("0148");function j(t,e,n,a){var r=n-1,i=t.length;while(++r<i)if(a(t[r],e))return r;return-1}var T=j,E=n("a2fb"),A=n("7804"),N=Array.prototype,q=N.splice;function W(t,e,n,a){var r=a?T:O["a"],i=-1,o=e.length,l=t;t===e&&(e=Object(A["a"])(e)),n&&(l=Object(k["a"])(t,Object(E["a"])(n)));while(++i<o){var s=0,c=e[i],u=n?n(c):c;while((s=r(l,u,s,a))>-1)l!==t&&q.call(l,s,1),q.call(t,s,1)}return t}var I=W;function K(t,e){return t&&t.length&&e&&e.length?I(t,e):t}var F=K,L=P(F),R=L,J=n("c949");function M(t,e,n,a,r,i,o){try{var l=t[i](o),s=l.value}catch(c){return void n(c)}l.done?e(s):Promise.resolve(s).then(a,r)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(t){M(i,a,r,o,l,"next",t)}function l(t){M(i,a,r,o,l,"throw",t)}o(void 0)}))}}var H={data:function(){return{tableData:[]}},computed:{data:function(){var t=this.tableData,e={};return t.forEach((function(t){e[t.host]=t})),e},fields:function(){var t=this.tableData;if(t.length>0)return R(Object.keys(t[0]),"host")},columns:function(){var t=this.tableData,e=[];return t.forEach((function(t){var n=t.host;e.push({field:n,label:n})})),e}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return U(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J["g"].zkStatus(t.$route.params.id);case 2:n=e.sent,a=n.data.entity,t.tableData=Object.freeze(a);case 5:case"end":return e.stop()}}),e)})))()}}},Q=H,B=(n("4f69"),n("2877")),Z=Object(B["a"])(Q,i,o,!1,null,"56dfe845",null),G=Z.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"replication-status pb-20"},[n("div",{staticClass:"title flex flex-between flex-vcenter ptb-10 pull-left"},[n("span",{staticClass:"fs-20 font-bold"},[t._v(t._s(t.$t("tables.Table Replication Status")))])]),n("vxe-toolbar",{staticClass:"pull-right",attrs:{zoom:"",custom:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("el-input",{staticClass:"width-250 mr-10",attrs:{size:"medium",placeholder:t.$t("common.keyword search"),"suffix-icon":"el-icon-search"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})]},proxy:!0}])}),n("vxe-table",t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"xTable",staticStyle:{clear:"both"},attrs:{columns:t.cols,data:t.currentPageData},on:{"sort-change":t.sortChangeEvent}},"vxe-table",t.gridOptions,!1),t._l(t.cols,(function(e,a){return n(e.prop?"vxe-column":"vxe-colgroup",{key:a,tag:"div",attrs:{sortable:!!e.prop,field:e.prop,title:e.label,align:"center","min-width":e.minWidth||140}},t._l(e.children,(function(e,a){return n("vxe-column",{key:a,attrs:{title:e.label,field:e.prop,width:"auto",align:"center",sortable:"",sortConfig:{trigger:"cell"}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row,r=e.column;return[n("div",{class:t.getClassName(a,r.property)},[t._v(t._s(a[r.property]))])]}}],null,!0)})})),1)})),1),n("vxe-pager",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,"page-sizes":t.pagination.pageSizes,total:t.pagination.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"update:pageSize":function(e){return t.$set(t.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.pagination,"pageSize",e)},"page-change":t.handlePageChange}})],1)},X=[],Y=n("5c8a"),tt=n("8cbb");function et(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Object(tt["a"])(t,void 0,e):[]}var nt=et,at=n("32e8");function rt(t,e){return ct(t)||st(t,e)||ot(t,e)||it()}function it(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ot(t,e){if(t){if("string"===typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(t,e):void 0}}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function st(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var a,r,i=[],o=!0,l=!1;try{for(n=n.call(t);!(o=(a=n.next()).done);o=!0)if(i.push(a.value),e&&i.length===e)break}catch(s){l=!0,r=s}finally{try{o||null==n["return"]||n["return"]()}finally{if(l)throw r}}return i}}function ct(t){if(Array.isArray(t))return t}function ut(t,e,n,a,r,i,o){try{var l=t[i](o),s=l.value}catch(c){return void n(c)}l.done?e(s):Promise.resolve(s).then(a,r)}function ft(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(t){ut(i,a,r,o,l,"next",t)}function l(t){ut(i,a,r,o,l,"throw",t)}o(void 0)}))}}function pt(t){return pt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}var ht={data:function(){return{tableData:[],headerData:[],timeFilter:null,refresh:null,currentPage:1,pageSize:10,loading:!1,searchKey:"",sort:{},pagination:{total:0,pageSize:10,pageSizes:[10,15,20,50,100,200,500,1e3],currentPage:1},gridOptions:{border:!0,resizable:!0,showHeaderOverflow:!0,showOverflow:!0,highlightHoverRow:!0,height:576,rowId:"tableName",toolbarConfig:{zoom:!0,custom:!0},sortConfig:{trigger:"cell"},filterConfig:{}}}},watch:{"queryList.length":function(t){this.pagination.currentPage=1,this.pagination.total=t}},computed:{queryList:function(){var t=this.searchKey,e=this.tableData,n=this.sort,a=n.property,r=n.order,i=e.filter((function(e){return e.name.includes(t)||e.shard1_0.includes(t)||e.shard1_1.includes(t)||e.shard2_0.includes(t)||e.shard2_1.includes(t)})).sort((function(t,e){var n=pt(t[a]);if("number"===n){var i=t[a]-e[a];if("asc"===r)return i;if("desc"===r)return-i}else if("string"===n){var o;if(o=t[a].length===e[a].length?t[a].localeCompare(e[a]):t[a].length-e[a].length,"asc"===r)return o;if("desc"===r)return-o}}));return i},cols:function(){var t=[{prop:"name",label:this.$t("tables.Table Name"),children:[]}],e=this.headerData;return e.forEach((function(e,n){var a="shard".concat(n+1),r={label:a,children:e.map((function(t,e){return{prop:"".concat(a,"_").concat(e),label:t}}))};t.push(r)})),t},currentPageData:function(){var t=this.pagination,e=t.currentPage,n=t.pageSize;this.queryList;return this.queryList.slice((e-1)*n,e*n)}},mounted:function(){this.fetchData()},methods:{sortChangeEvent:function(t){var e=t.property,n=t.order;this.sort={property:e,order:n}},handlePageChange:function(t){this.pagination.currentPage=t.currentPage},fetchData:function(){var t=this;return ft(s.a.mark((function e(){var n,a,r,i,o,l,c;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,J["g"].replicationStatus(t.$route.params.id)["finally"]((function(){return t.loading=!1}));case 3:n=e.sent,a=n.data.entity,r=a.header,i=void 0===r?[]:r,o=a.tables,l=void 0===o?[]:o,t.headerData=Object(Y["a"])(i),c=[],l.forEach((function(t){var e=t.name,n=t.values,a={name:e};n.forEach((function(t,e){var n="shard".concat(e+1);t.forEach((function(t,e){a["".concat(n,"_").concat(e)]=t}))})),c.push(a)})),t.tableData=nt(c,at["a"]);case 13:case"end":return e.stop()}}),e)})))()},getClassName:function(t,e){var n=(null===e||void 0===e?void 0:e.split("_"))||["",""],a=rt(n,2),r=a[0],i=a[1],o=t[e],l="0"===i?"1":"0",s=t[r+"_"+l];if(s&&"-1"!==r.indexOf("F")){var c=parseInt(o.replace("F",""),10);if(s){var u=parseInt(s.replace("L",""),10);return c<u?"yellow":void 0}}}}},dt=ht,bt=(n("c371"),Object(B["a"])(dt,V,X,!1,null,"f6afc0d8",null)),vt=bt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-metric pb-20"},[n("div",{staticClass:"title flex flex-between flex-vcenter ptb-10 pull-left"},[n("span",{staticClass:"fs-20 font-bold"},[t._v(t._s(t.$t("tables.Table Metrics")))])]),n("vxe-toolbar",{staticClass:"pull-right",attrs:{zoom:"",custom:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("el-input",{staticClass:"width-250 mr-10",attrs:{size:"medium",placeholder:t.$t("common.keyword search"),"suffix-icon":"el-icon-search"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})]},proxy:!0}])}),n("vxe-table",t._b({ref:"xTable",staticStyle:{clear:"both"},attrs:{loading:t.loading,columns:t.columns,data:t.currentPageData},on:{"sort-change":t.sortChangeEvent}},"vxe-table",t.gridOptions,!1),[t._l(t.columns,(function(e){var a=e.prop,r=e.label,i=e.minWidth,o=e.fixed,l=e.filters;return n("vxe-column",{key:a,attrs:{fixed:o,sortable:"",field:a,title:r,filters:l||null,"min-width":i||140},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row,r=e.column;return[r.property.endsWith("compressed")?n("span",[t._v(t._s(t.byteConvert(a[r.property])))]):n("span",[t._v(t._s(a[r.property]))])]}}],null,!0)})})),n("vxe-column",{attrs:{fixed:"right",align:"center",title:t.$t("tables.Action"),width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.viewSql(e.row.tableName)}}},[t._v(t._s(t.$t("tables.Schema")))]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.onDelete(e.row.tableName)}}},[t._v(t._s(t.$t("tables.Delete")))])]}}])})],2),n("vxe-pager",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,"page-sizes":t.pagination.pageSizes,total:t.pagination.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"update:pageSize":function(e){return t.$set(t.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.pagination,"pageSize",e)},"page-change":t.handlePageChange}})],1)},gt=[],yt=n("08ba"),wt=n("3617"),xt=n("c281");function St(t,e){return Dt(t)||zt(t,e)||_t(t,e)||Ct()}function Ct(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _t(t,e){if(t){if("string"===typeof t)return $t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(t,e):void 0}}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function zt(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var a,r,i=[],o=!0,l=!1;try{for(n=n.call(t);!(o=(a=n.next()).done);o=!0)if(i.push(a.value),e&&i.length===e)break}catch(s){l=!0,r=s}finally{try{o||null==n["return"]||n["return"]()}finally{if(l)throw r}}return i}}function Dt(t){if(Array.isArray(t))return t}function Pt(t,e,n,a,r,i,o){try{var l=t[i](o),s=l.value}catch(c){return void n(c)}l.done?e(s):Promise.resolve(s).then(a,r)}function kt(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(t){Pt(i,a,r,o,l,"next",t)}function l(t){Pt(i,a,r,o,l,"throw",t)}o(void 0)}))}}function Ot(t){return Ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}var jt={data:function(){return{loading:!1,tableData:[],searchKey:"",sort:{},pagination:{total:0,pageSize:10,pageSizes:[10,15,20,50,100,200,500,1e3],currentPage:1},gridOptions:{border:!0,resizable:!0,showHeaderOverflow:!0,showOverflow:!0,highlightHoverRow:!0,height:550,rowId:"tableName",toolbarConfig:{zoom:!0,custom:!0},sortConfig:{trigger:"cell"},filterConfig:{}}}},watch:{"listData.length":function(t){this.pagination.currentPage=1,this.pagination.total=t}},computed:{columns:function(){var t=[{prop:"tableName",label:this.$t("tables.Table Name"),minWidth:250,fixed:"left",sortable:!0},{prop:"columns",label:this.$t("tables.Columns"),width:140,sortable:!0},{prop:"rows",label:this.$t("tables.Rows"),width:140,sortable:!0},{prop:"partitions",label:this.$t("tables.Partitions"),width:140,sortable:!0},{prop:"parts",label:this.$t("tables.Parts"),width:140,sortable:!0},{prop:"uncompressed",label:this.$t("tables.UnCompressed"),minWidth:220,sortable:!0},{prop:"compressed",label:this.$t("tables.Compressed"),minWidth:200,sortable:!0},{prop:"readwrite_status",label:this.$t("tables.RWStatus"),filters:[{label:"TRUE",value:"TRUE"},{label:"FALSE",value:"FALSE"}],minWidth:120,sortable:!0},{prop:"completedQueries",label:this.$t("tables.Completed Queries in last 24h"),minWidth:250,sortable:!0},{prop:"failedQueries",label:this.$t("tables.Failed Queries in last 24h"),minWidth:220,sortable:!0},{prop:"queryCost",label:this.$t("tables.Last 7 days info"),minWidth:340,sortable:!0}];return t},listData:function(){var t=this.searchKey,e=this.sort,n=e.property,a=e.order,r=this.tableData.filter((function(e){var n,a=!0;return null!==(n=e.tableName)&&void 0!==n&&n.includes(t)||(a=!1),a})).sort((function(t,e){var r=Ot(t[n]);if("number"===r){var i=t[n]-e[n];if("asc"===a)return i;if("desc"===a)return-i}else if("string"===r){var o;if(o=t[n].length===e[n].length?t[n].localeCompare(e[n]):t[n].length-e[n].length,"asc"===a)return o;if("desc"===a)return-o}}));return r},currentPageData:function(){var t,e=this.pagination,n=e.currentPage,a=e.pageSize;return null===(t=this.listData)||void 0===t?void 0:t.slice((n-1)*a,n*a)}},created:function(){this.fetchData()},methods:{byteConvert:xt["a"],fetchData:function(){var t=this;return kt(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J["g"].tableMetrics(t.$route.params.id);case 2:n=e.sent,a=n.data.entity,t.tableData=Object.freeze(Object.entries(a).map((function(t){var e=St(t,2),n=e[0],a=e[1];return a.readwrite_status=a.readwrite_status.toString().toUpperCase(),a.queryCost=Object.values(a.queryCost).join(","),a.tableName=n,a}))),t.pagination.total=t.tableData.length;case 6:case"end":return e.stop()}}),e)})))()},sortChangeEvent:function(t){var e=t.property,n=t.order;this.sort={property:e,order:n}},handlePageChange:function(t){this.pagination.currentPage=t.currentPage},onDelete:function(t){var e=this;return kt(s.a.mark((function n(){var a,r,i,o,l;return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm(e.$t("common.Confirm Delete"),e.$t("common.tips"),{confirmButtonText:e.$t("common.Delete"),cancelButtonText:e.$t("common.Cancel"),text:"warning"});case 2:return a=t.split("."),r=St(a,2),i=r[0],o=r[1],l=e.$route.params.id,n.next=6,J["g"].deleteTable(l,{database:i,tableName:o});case 6:e.$message.success("Table ".concat(t," ").concat(e.$t("common.Delete")).concat(e.$t("common.Success"))),e.fetchData();case 8:case"end":return n.stop()}}),n)})))()},viewSql:function(t){var e=this;return kt(s.a.mark((function n(){var a,r,i,o,l,c,u;return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.split("."),r=St(a,2),i=r[0],o=r[1],l=e.$route.params.id,n.next=4,J["g"].viewTableCreateSql(l,{database:i,tableName:o});case 4:return c=n.sent,u=c.data.entity.create_table_query,n.next=8,Object(yt["d"])({component:wt["b"],props:{title:e.$t("tables.Schema"),width:800,customClass:"sql-code-mirror-modal",cancelText:e.$t("common.Cancel"),okText:e.$t("common.Confirm")},data:{sql:u}});case 8:case"end":return n.stop()}}),n)})))()}}},Tt=jt,Et=(n("6812"),Object(B["a"])(Tt,mt,gt,!1,null,null,null)),At=Et.exports,Nt={data:function(){return{}},mounted:function(){},methods:{},components:{ZkTable:G,ReplicationTable:vt,TableMetric:At}},qt=Nt,Wt=Object(B["a"])(qt,a,r,!1,null,"6ab6d610",null);e["default"]=Wt.exports},b8f9:function(t,e,n){},c371:function(t,e,n){"use strict";var a=n("b8f9"),r=n.n(a);r.a},d959:function(t,e,n){}}]);